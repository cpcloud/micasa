<!DOCTYPE html>
<!-- Copyright 2026 Phillip Cloud -->
<!-- Licensed under the Apache License, Version 2.0 -->
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>micasa &mdash; your house, in a terminal</title>
  <meta name="description" content="A terminal UI for tracking everything about your home. Single SQLite file. No cloud. No account. No subscriptions. Just your house.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=JetBrains+Mono:wght@400;700&family=Source+Serif+4:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <link rel="icon" type="image/svg+xml" href="images/favicon.svg">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ─── Hero ─── -->
<header class="hero">
  <div class="container">
    <div class="hero-house-scene" id="house-scene">
      <div class="hero-house" id="hero-house" aria-hidden="true">&nbsp;&nbsp;&nbsp;&nbsp;&#x2584;&#x2593;&#x2584;<span class="chimney-anchor chimney">&#x2588;<span class="smoke-bed" id="smoke-bed" aria-hidden="true"></span></span>&nbsp;&nbsp;&nbsp;<br>&#x2584;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2584;<br>&#x2584;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2593;&#x2584;<br>&#x2588;&#x2588; &#x2591;&#x2591; &#x2591;&#x2591; &#x2588;&#x2588;<br>&#x2588;&#x2588; &nbsp;&#x2588;&#x2588;&#x2588;&#x2588; &#x2588;&#x2588;<br>&#x2588;&#x2588; &nbsp;&#x2588;&nbsp;&nbsp;&#x2588; &#x2588;&#x2588;<br>&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;&#x2580;</div>
      <div class="crumble-caption" id="crumble-caption">should've used micasa.</div>
    </div>
    <h1>micasa<span class="dot">.</span></h1>
    <p class="tagline">
      A terminal UI for tracking everything about your home.
      Single SQLite file. No cloud. No account. No subscriptions.
    </p>
    <div class="hero-cta">
      <a href="#install" class="btn-primary">Install</a>
      <a href="/docs/" class="btn-secondary">Docs</a>
      <a href="https://github.com/cpcloud/micasa" class="btn-secondary">GitHub</a>
    </div>
  </div>
</header>

<!-- ─── Pitch ─── -->
<div class="container">
  <p class="pitch">
    Your house is quietly plotting to break while you sleep&mdash;and
    you&rsquo;re dreaming about redoing the kitchen.
  </p>
  <p class="pitch pitch-follow">
    <strong class="brand">micasa</strong> tracks both from your terminal.
  </p>
</div>

<!-- ─── Features ─── -->
<section id="features">
  <div class="container">
    <h2>Frequently <span class="typewriter accent" id="typewriter">asked</span> questions</h2>
    <div class="features-grid">

      <div class="feature">
        <p class="feature-q">When did I last change the furnace filter?</p>
        <p class="feature-a">Maintenance schedules, auto-computed due dates, full service history.</p>
      </div>

      <div class="feature">
        <p class="feature-q">What if we finally did the backyard?</p>
        <p class="feature-a">Projects from napkin sketch to completion&mdash;or graceful abandonment.</p>
      </div>

      <div class="feature">
        <p class="feature-q">How much would it actually cost to&hellip;</p>
        <p class="feature-a">Quotes side by side, vendor history, and the math you need to actually decide.</p>
      </div>

      <div class="feature">
        <p class="feature-q">Is the dishwasher still under warranty?</p>
        <p class="feature-a">Appliance tracking with purchase dates, warranty windows, and linked maintenance.</p>
      </div>

    </div>
  </div>
</section>

<!-- ─── Install ─── -->
<section id="install">
  <div class="container">
    <h2>Get <span class="accent">started</span></h2>
    <div class="install-steps">
      <div>
        <p>Install with Go (1.25+):</p>
        <pre><code>go install github.com/cpcloud/micasa/cmd/micasa@latest</code></pre>
      </div>
      <p class="install-or">or grab a binary from the <a href="https://github.com/cpcloud/micasa/releases/latest">latest release</a></p>
      <div>
        <p>Then run it:</p>
        <pre><code>micasa --demo         # poke around with sample data
micasa                # start fresh with your own house
micasa --print-path   # show where the database lives</code></pre>
      </div>
    </div>
    <p class="install-data">One SQLite file. Your data, your machine. Back it up with <code>cp</code>.</p>
  </div>
</section>

<!-- ─── Keybindings ─── -->
<section id="keys">
  <div class="container">
    <h2>Keyboard <span class="accent">driven</span></h2>
    <p class="section-note">No mouse required.</p>
    <div class="keys-modes">

      <div>
        <h3>Normal <span class="mode-badge mode-normal">normal</span></h3>
        <ul class="key-list">
          <li><kbd>j / k</kbd> <span class="desc">Row up / down</span></li>
          <li><kbd>h / l</kbd> <span class="desc">Column left / right</span></li>
          <li><kbd>g / G</kbd> <span class="desc">First / last row</span></li>
          <li><kbd>d / u</kbd> <span class="desc">Half-page down / up</span></li>
          <li><kbd>tab</kbd> <span class="desc">Next tab</span></li>
          <li><kbd>s / S</kbd> <span class="desc">Sort / clear sorts</span></li>
          <li><kbd>enter</kbd> <span class="desc">Drilldown or follow link</span></li>
          <li><kbd>c / C</kbd> <span class="desc">Hide / show columns</span></li>
          <li><kbd>i</kbd> <span class="desc">Enter Edit mode</span></li>
          <li><kbd>?</kbd> <span class="desc">Help</span></li>
          <li><kbd>q</kbd> <span class="desc">Quit</span></li>
        </ul>
      </div>

      <div>
        <h3>Edit <span class="mode-badge mode-edit">edit</span></h3>
        <ul class="key-list">
          <li><kbd>a</kbd> <span class="desc">Add entry</span></li>
          <li><kbd>e</kbd> <span class="desc">Edit cell or row</span></li>
          <li><kbd>d</kbd> <span class="desc">Delete / restore</span></li>
          <li><kbd>x</kbd> <span class="desc">Show / hide deleted</span></li>
          <li><kbd>p</kbd> <span class="desc">Edit house profile</span></li>
          <li><kbd>u / r</kbd> <span class="desc">Undo / redo</span></li>
          <li><kbd>1&ndash;9</kbd> <span class="desc">Jump to Nth option</span></li>
          <li><kbd>esc</kbd> <span class="desc">Back to Normal</span></li>
        </ul>
      </div>

    </div>
  </div>
</section>

<!-- ─── Tech ─── -->
<section id="tech">
  <div class="container">
    <p class="tech-note"><a href="https://go.dev">Pure Go</a>, zero CGO. <a href="https://github.com/charmbracelet">Charmbracelet</a> + <a href="https://gorm.io">GORM</a> + <a href="https://sqlite.org">SQLite</a>. Docs by <a href="https://gohugo.io">Hugo</a>.</p>
    <p class="tech-note">Pair-programmed with <a href="https://claude.ai">Claude</a> via <a href="https://cursor.com">Cursor</a>.</p>
  </div>
</section>

<!-- ─── Footer ─── -->
<footer>
  <div class="container">
    <div class="footer-links">
      <a href="/docs/">Docs</a>
      <a href="https://github.com/cpcloud/micasa">GitHub</a>
      <a href="https://github.com/cpcloud/micasa/releases/latest">Releases</a>
      <a href="https://github.com/cpcloud/micasa/blob/main/LICENSE">Apache-2.0</a>
    </div>
    <p>&copy; 2026 Phillip Cloud</p>
  </div>
</footer>

<script>
(function () {
  var el = document.getElementById('typewriter');
  var words = [
    { text: 'panicked',    cls: 'accent' },
    { text: 'daydreamed',  cls: 'accent-alt' },
    { text: 'avoided',        cls: 'accent' },
    { text: 'workshopped',  cls: 'accent-alt' },
    { text: 'entertained', cls: 'accent-alt' }
  ];
  var i = 0;
  var TYPE = 100, DELETE = 60, PAUSE = 2800, GAP = 500;

  var reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (reduced) return;

  function type(word, cb) {
    var j = 0;
    el.className = 'typewriter ' + word.cls;
    (function next() {
      el.textContent = word.text.slice(0, ++j);
      if (j < word.text.length) setTimeout(next, TYPE);
      else setTimeout(cb, PAUSE);
    })();
  }

  function erase(cb) {
    var text = el.textContent;
    (function next() {
      text = text.slice(0, -1);
      el.textContent = text;
      if (text.length > 0) setTimeout(next, DELETE);
      else setTimeout(cb, GAP);
    })();
  }

  function cycle() {
    type(words[i], function () {
      erase(function () {
        i = (i + 1) % words.length;
        cycle();
      });
    });
  }

  // First word is already seeded in HTML; pause, erase, then continue
  setTimeout(function () {
    erase(function () {
      i = 1;
      cycle();
    });
  }, PAUSE);
})();
</script>

<script>
// Easter egg: click the house to crumble it
(function () {
  var scene = document.getElementById('house-scene');
  var house = document.getElementById('hero-house');
  var caption = document.getElementById('crumble-caption');
  if (!scene || !house) return;
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

  var animating = false;
  var destroyed = false;
  var rubbleEls = [];
  var rubbleSmokeId = 0;
  var rubbleSmokeParticles = [];
  var emberInterval = 0;
  var originalHTML = house.innerHTML;

  scene.addEventListener('click', function () {
    if (animating) return;

    if (destroyed) {
      rebuildHouse();
    } else {
      destroyHouse();
    }
  });

  function destroyHouse() {
    animating = true;

    // Kill smoke
    var smoke = document.getElementById('smoke-bed');
    if (smoke) smoke.style.display = 'none';

    var houseRect = house.getBoundingClientRect();
    var sceneRect = scene.getBoundingClientRect();
    var text = house.innerText;
    var lines = text.split('\n');
    var blocks = [];

    var charW = houseRect.width / Math.max.apply(null, lines.map(function (l) { return l.length; }));
    var charH = houseRect.height / lines.length;

    var blockChars = /[\u2580-\u259F]/;
    for (var row = 0; row < lines.length; row++) {
      for (var col = 0; col < lines[row].length; col++) {
        var ch = lines[row][col];
        if (blockChars.test(ch)) {
          blocks.push({
            ch: ch,
            x: (houseRect.left - sceneRect.left) + col * charW,
            y: (houseRect.top - sceneRect.top) + row * charH,
            row: row
          });
        }
      }
    }

    house.style.visibility = 'hidden';

    var els = [];
    for (var i = 0; i < blocks.length; i++) {
      var b = blocks[i];
      var el = document.createElement('span');
      el.className = 'crumble-block';
      el.textContent = b.ch;
      el.style.left = b.x + 'px';
      el.style.top = b.y + 'px';
      scene.appendChild(el);
      els.push({ el: el, b: b, vx: 0, vy: 0, va: 0, fallen: false });
    }

    // Ground = top of the last row, in scene-relative coordinates
    var houseTopInScene = houseRect.top - sceneRect.top;
    var groundY = houseTopInScene + (lines.length - 1) * charH;
    var gravity = 800;
    var started = performance.now();
    var rowDelay = 120;

    function tick(now) {
      var t = (now - started) / 1000;
      var allDone = true;

      for (var j = 0; j < els.length; j++) {
        var item = els[j];
        if (item.fallen) continue;

        var delay = item.b.row * rowDelay / 1000;
        var localT = t - delay;
        if (localT < 0) { allDone = false; continue; }

        if (localT < 0.016 && item.vx === 0) {
          item.vx = (Math.random() - 0.5) * 120;
          item.va = (Math.random() - 0.5) * 400;
        }

        var dx = item.vx * localT;
        var dy = 0.5 * gravity * localT * localT;
        var angle = item.va * localT;

        var newY = item.b.y + dy;
        if (newY > groundY) {
          newY = groundY;
          item.fallen = true;
        } else {
          allDone = false;
        }

        var opacity = item.fallen ? Math.max(0, 1 - (localT - 0.5)) : 1;
        item.el.style.transform =
          'translate(' + dx.toFixed(1) + 'px, ' + (newY - item.b.y).toFixed(1) + 'px) rotate(' + angle.toFixed(0) + 'deg)';
        item.el.style.opacity = opacity;
      }

      if (!allDone) {
        requestAnimationFrame(tick);
      } else {
        // Settle into smoldering rubble
        setTimeout(function () {
          // Dim blocks and tint warm to look like embers
          for (var k = 0; k < els.length; k++) {
            els[k].el.style.transition = 'opacity 0.8s, color 0.8s';
            els[k].el.style.opacity = '0.5';
            els[k].el.style.color = '#a04e30';
          }
          rubbleEls = els;
          if (caption) caption.classList.add('visible');

          // Ember flicker: randomly pulse a few blocks brighter
          emberInterval = setInterval(function () {
            for (var e = 0; e < rubbleEls.length; e++) {
              if (Math.random() < 0.08) {
                var el = rubbleEls[e].el;
                el.style.color = Math.random() < 0.5 ? '#c05e3c' : '#d4783c';
                el.style.opacity = '0.7';
                setTimeout((function (ref) {
                  return function () {
                    ref.style.color = '#a04e30';
                    ref.style.opacity = '0.4';
                  };
                })(el), 300 + Math.random() * 400);
              }
            }
          }, 150);

          // Rubble smoke: wispy particles rising from the pile
          var pileCenterX = houseRect.width / 2;
          var pileY = groundY;
          function spawnRubbleSmoke() {
            if (!destroyed && rubbleSmokeParticles.length === 0) return;
            var el = document.createElement('span');
            el.className = 'smoke-particle';
            el.textContent = Math.random() < 0.7 ? '\u2591' : '\u2592';
            el.style.position = 'absolute';
            el.style.left = (pileCenterX + (Math.random() - 0.5) * houseRect.width * 0.6) + 'px';
            el.style.top = pileY + 'px';
            el.style.color = '#9e958a';
            el.style.fontSize = '0.7em';
            el.style.opacity = '0';
            scene.appendChild(el);

            var p = {
              el: el, age: 0,
              lifetime: 1500 + Math.random() * 2000,
              startX: parseFloat(el.style.left),
              drift: (Math.random() - 0.5) * 30,
              rise: 30 + Math.random() * 25
            };
            rubbleSmokeParticles.push(p);
          }

          var rubbleSmokeSpawnTimer = setInterval(function () {
            if (rubbleSmokeParticles.length < 6) spawnRubbleSmoke();
          }, 400);

          var lastT = 0;
          function tickRubbleSmoke(now) {
            if (!lastT) lastT = now;
            var dt = Math.min((now - lastT) / 1000, 0.1);
            lastT = now;

            for (var i = rubbleSmokeParticles.length - 1; i >= 0; i--) {
              var sp = rubbleSmokeParticles[i];
              sp.age += dt * 1000;
              var t = sp.age / sp.lifetime;
              if (t >= 1) {
                sp.el.remove();
                rubbleSmokeParticles.splice(i, 1);
                continue;
              }
              var rise = sp.rise * t;
              var drift = sp.drift * t;
              var alpha = t < 0.15 ? (t / 0.15) * 0.4 : 0.4 * (1 - (t - 0.15) / 0.85);
              sp.el.style.transform = 'translate(' + drift.toFixed(1) + 'px, -' + rise.toFixed(1) + 'px)';
              sp.el.style.opacity = alpha.toFixed(3);
            }

            rubbleSmokeId = requestAnimationFrame(tickRubbleSmoke);
          }
          rubbleSmokeId = requestAnimationFrame(tickRubbleSmoke);

          // Store spawn timer for cleanup
          scene._rubbleSmokeSpawnTimer = rubbleSmokeSpawnTimer;

          destroyed = true;
          animating = false;
        }, 200);
      }
    }

    requestAnimationFrame(tick);
  }

  function rebuildHouse() {
    animating = true;

    // Stop smolder effects
    clearInterval(emberInterval);
    emberInterval = 0;
    cancelAnimationFrame(rubbleSmokeId);
    rubbleSmokeId = 0;
    if (scene._rubbleSmokeSpawnTimer) {
      clearInterval(scene._rubbleSmokeSpawnTimer);
      scene._rubbleSmokeSpawnTimer = 0;
    }
    for (var s = 0; s < rubbleSmokeParticles.length; s++) {
      rubbleSmokeParticles[s].el.remove();
    }
    rubbleSmokeParticles = [];

    // Hide caption
    if (caption) caption.classList.remove('visible');

    // Find max row for reverse stagger (bottom rows rebuild first)
    var maxRow = 0;
    for (var k = 0; k < rubbleEls.length; k++) {
      if (rubbleEls[k].b.row > maxRow) maxRow = rubbleEls[k].b.row;
    }

    var rowDelay = 100; // ms per row
    var flightDuration = 0.5; // seconds

    // Restore color/opacity and animate each block back to its original position
    for (var k = 0; k < rubbleEls.length; k++) {
      var item = rubbleEls[k];
      var delay = (maxRow - item.b.row) * rowDelay; // bottom rows first
      item.el.style.transition =
        'transform ' + flightDuration + 's cubic-bezier(0.2, 0.8, 0.3, 1) ' + delay + 'ms, ' +
        'opacity 0.3s ease ' + delay + 'ms, ' +
        'color 0.3s ease ' + delay + 'ms';
      item.el.style.opacity = '1';
      item.el.style.color = '';
      item.el.style.transform = 'translate(0, 0) rotate(0deg)';
    }

    // Total animation time: slowest row delay + flight
    var totalMs = maxRow * rowDelay + flightDuration * 1000 + 100;

    setTimeout(function () {
      // Remove rubble, swap to real house
      for (var k = 0; k < rubbleEls.length; k++) {
        rubbleEls[k].el.remove();
      }
      rubbleEls = [];

      house.innerHTML = originalHTML;
      house.style.visibility = 'visible';
      house.style.opacity = '1';

      // Restart smoke
      var newSmokeBed = document.getElementById('smoke-bed');
      if (newSmokeBed) newSmokeBed.style.display = '';

      destroyed = false;
      animating = false;
    }, totalMs);
  }
})();
</script>

<script>
// Chimney smoke particle system
(function () {
  if (!document.getElementById('smoke-bed')) return;
  if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;

  // Mostly light block chars for a wispy look
  var glyphs = ['\u2591', '\u2591', '\u2591', '\u2592'];
  var particles = [];
  var MAX_PARTICLES = 5;

  function rand(lo, hi) { return lo + Math.random() * (hi - lo); }

  function spawn() {
    // Re-query each spawn so it survives house DOM rebuilds
    var bed = document.getElementById('smoke-bed');
    if (bed && particles.length < MAX_PARTICLES) {
      var el = document.createElement('span');
      el.className = 'smoke-particle';
      el.textContent = glyphs[Math.floor(Math.random() * glyphs.length)];
      bed.appendChild(el);

      particles.push({
        el: el,
        age: 0,
        lifetime: rand(3000, 5000),
        x0: rand(-0.2, 0.2),
        // Primary wobble: gentle sway
        amp1: rand(0.15, 0.4),
        freq1: rand(0.8, 1.6),
        phase1: rand(0, Math.PI * 2),
        // Secondary wobble: subtle jitter
        amp2: rand(0.05, 0.12),
        freq2: rand(2.5, 4.0),
        phase2: rand(0, Math.PI * 2),
        rise: rand(0.8, 1.4),
        drift: rand(-0.05, 0.3),
        scaleEnd: rand(1.2, 1.6),
        peakAlpha: rand(0.7, 0.9)
      });
    }

    setTimeout(spawn, rand(800, 1500));
  }

  var last = 0;
  function tick(now) {
    if (!last) last = now;
    var dt = Math.min((now - last) / 1000, 0.1); // cap dt to avoid jumps
    last = now;

    for (var i = particles.length - 1; i >= 0; i--) {
      var p = particles[i];
      p.age += dt * 1000;
      var t = p.age / p.lifetime; // normalized 0..1

      if (t >= 1) {
        p.el.remove();
        particles.splice(i, 1);
        continue;
      }

      // Rise
      var y = p.rise * (p.age / 1000);

      // Zig-zag: two overlaid sine waves, amplitude grows with age
      var wobble1 = Math.sin(p.freq1 * t * Math.PI * 2 + p.phase1) * p.amp1;
      var wobble2 = Math.sin(p.freq2 * t * Math.PI * 2 + p.phase2) * p.amp2;
      var x = p.x0 + (wobble1 + wobble2) * t + p.drift * t;

      // Scale grows gently
      var scale = 1 + (p.scaleEnd - 1) * t;

      // Opacity: quick fade-in, long fade-out
      var alpha;
      if (t < 0.12) {
        alpha = (t / 0.12) * p.peakAlpha;
      } else {
        alpha = p.peakAlpha * (1 - (t - 0.12) / 0.88);
      }

      p.el.style.transform =
        'translate(' + x.toFixed(2) + 'em, -' + y.toFixed(2) + 'em) scale(' + scale.toFixed(2) + ')';
      p.el.style.opacity = alpha.toFixed(3);
    }

    requestAnimationFrame(tick);
  }

  // Kick off
  spawn();
  requestAnimationFrame(tick);
})();
</script>
</body>
</html>
